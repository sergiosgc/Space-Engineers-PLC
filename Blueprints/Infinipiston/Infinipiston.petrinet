{"version":"1.0","places":[{"name":"extend: init","entryFunc":"","tickFunc":"","exitFunc":"","markings":["extend"],"x":100,"y":100},{"name":"extend: extend","entryFunc":"(petriNet) => { \n petriNet.block<IMyProjector>(\"Infinipiston Extend Projector\").Enabled = true;\n petriNet.block<IMyProjector>(\"Infinipiston Retract Projector\").Enabled = false;\n petriNet.block<IMyShipGrinder>(\"Infinipiston Grinder\").Enabled = false;\n petriNet.block<IMyShipWelder>(\"Infinipiston Welder\").Enabled = true;\n petriNet.block<IMyShipConnector>(\"Infinipiston Connector\").Enabled = true;\n petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => petriNet.blockMoveTo(piston, 10, 0.3f) );\n}","tickFunc":"","exitFunc":"(petriNet) => {\n petriNet.block<IMyShipConnector>(\"Infinipiston Connector\").Connect();\n petriNet.block<IMyProjector>(\"Infinipiston Extend Projector\").Enabled = false;\n  petriNet.block<IMyShipWelder>(\"Infinipiston Welder\").Enabled = false;\n}","markings":["2"],"x":100,"y":800},{"name":"extend: retract","entryFunc":"(petriNet) => petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => petriNet.blockMoveTo(piston, 0, 3) )","tickFunc":"","exitFunc":"(petriNet) => petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => piston.Velocity = 0 )","markings":[],"x":100,"y":1200},{"name":"extend: unmerge block","entryFunc":"(petriNet) => petriNet.block<IMyShipMergeBlock>(\"Infinipiston Merge Block\").Enabled = false","tickFunc":"","exitFunc":"","markings":[],"x":300,"y":1100},{"name":"extend: merge block","entryFunc":"(petriNet) => petriNet.block<IMyShipMergeBlock>(\"Infinipiston Merge Block\").Enabled = true","tickFunc":"","exitFunc":"","markings":[],"x":300,"y":1300},{"name":"not stopping","entryFunc":"","tickFunc":"","exitFunc":"","markings":["extend","retract"],"x":-200,"y":800},{"name":"stopping","entryFunc":"","tickFunc":"","exitFunc":"","markings":["stop"],"x":-500,"y":800},{"name":"extend done","entryFunc":"","tickFunc":"","exitFunc":"","markings":[],"x":-100,"y":1300},{"name":"done","entryFunc":"","tickFunc":"","exitFunc":"","markings":[],"x":-500,"y":1000},{"name":"extend: grind connector","entryFunc":"(petriNet) => { \n petriNet.block<IMyShipGrinder>(\"Infinipiston Grinder\").Enabled = true;\n petriNet.block<IMyShipWelder>(\"Infinipiston Welder\").Enabled = false;\n}","tickFunc":"","exitFunc":"(petriNet) => { \n petriNet.block<IMyShipGrinder>(\"Infinipiston Grinder\").Enabled = false;\n petriNet.block<IMyShipWelder>(\"Infinipiston Welder\").Enabled = false;\n}","markings":[],"x":100,"y":500},{"name":"extend: reset position","entryFunc":"(petriNet) => petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => petriNet.blockMoveTo(piston, 0, 2f) )","tickFunc":"","exitFunc":"","markings":[],"x":100,"y":300},{"name":"extend: wait full extension","entryFunc":"","tickFunc":"","exitFunc":"","markings":["2"],"x":300,"y":700},{"name":"extend: approach connector","entryFunc":"(petriNet) => petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => petriNet.blockMoveTo(piston, 0, 0.5f) )","tickFunc":"","exitFunc":"","markings":[],"x":300,"y":900},{"name":"retract: init","entryFunc":"","tickFunc":"","exitFunc":"","markings":["retract"],"x":-1000,"y":100},{"name":"retract: grind segment","entryFunc":"(petriNet) => {\n petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => petriNet.blockMoveTo(piston, 0, 0.5f) );\n petriNet.block<IMyShipGrinder>(\"Infinipiston Grinder\").Enabled = true;\n petriNet.block<IMyShipGrinder>(\"Infinipiston Merge Grinder\").Enabled = true;\n petriNet.block<IMyShipWelder>(\"Infinipiston Welder\").Enabled = false;\n}","tickFunc":"","exitFunc":"(petriNet) => {\n petriNet.block<IMyShipGrinder>(\"Infinipiston Grinder\").Enabled = false;\n petriNet.block<IMyShipGrinder>(\"Infinipiston Merge Grinder\").Enabled = false;\n}","markings":[],"x":-1000,"y":300},{"name":"retract: weld connector","entryFunc":"(petriNet) => {\n petriNet.block<IMyProjector>(\"Infinipiston Extend Projector\").Enabled = false;\n petriNet.block<IMyProjector>(\"Infinipiston Retract Projector\").Enabled = true;\n petriNet.block<IMyShipGrinder>(\"Infinipiston Grinder\").Enabled = false;\n petriNet.block<IMyShipWelder>(\"Infinipiston Welder\").Enabled = true;\n petriNet.block<IMyShipConnector>(\"Infinipiston Connector\").Enabled = true;\n}","tickFunc":"","exitFunc":"(petriNet) => {\n petriNet.block<IMyShipConnector>(\"Infinipiston Connector\").Connect();\n petriNet.block<IMyShipGrinder>(\"Infinipiston Grinder\").Enabled = false;\n petriNet.block<IMyShipWelder>(\"Infinipiston Welder\").Enabled = false;\n petriNet.block<IMyProjector>(\"Infinipiston Retract Projector\").Enabled = false;\n}\n","markings":[],"x":-1000,"y":500},{"name":"retract: extend","entryFunc":"(petriNet) => petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => petriNet.blockMoveTo(piston, 10, 3) )","tickFunc":"","exitFunc":"(petriNet) => petriNet.blocks<IMyPistonBase>(\"Infinipiston Pistons\", (piston) => piston.Velocity = 0 )","markings":[],"x":-1000,"y":800},{"name":"retract: unmerge block","entryFunc":"(petriNet) => petriNet.block<IMyShipMergeBlock>(\"Infinipiston Merge Block\").Enabled = false","tickFunc":"","exitFunc":"","markings":[],"x":-1200,"y":700},{"name":"retract: merge block","entryFunc":"(petriNet) => petriNet.block<IMyShipMergeBlock>(\"Infinipiston Merge Block\").Enabled = true","tickFunc":"","exitFunc":"","markings":[],"x":-1200,"y":900},{"name":"retract: done","entryFunc":"","tickFunc":"","exitFunc":"","markings":[],"x":-700,"y":900}],"transitions":[{"enabledTest":"(petriNet) =>  petriNet.block<IMyShipConnector>(\"Infinipiston Connector\").Status == MyShipConnectorStatus.Unconnected","timer":500,"updateFrequency":500,"x":70,"y":594,"inflows":["extend: grind connector"],"outflows":["extend: extend","extend: wait full extension"]},{"enabledTest":"(petriNet) =>  petriNet.block<IMyShipConnector>(\"Infinipiston Connector\").Status != MyShipConnectorStatus.Unconnected","timer":1,"updateFrequency":1,"x":70,"y":994,"inflows":["extend: extend","extend: approach connector"],"outflows":["extend: retract","extend: unmerge block"]},{"enabledTest":"(petriNet) => petriNet.block<IMyPistonBase>(\"Infinipiston Piston\").CurrentPosition < 5","timer":1,"updateFrequency":1,"x":270,"y":1194,"inflows":["extend: unmerge block"],"outflows":["extend: merge block"]},{"enabledTest":"(petriNet) => petriNet.block<IMyShipMergeBlock>(\"Infinipiston Merge Block\").State == MergeState.Locked","timer":1,"updateFrequency":1,"x":70,"y":1394,"inflows":["extend: merge block","extend: retract"],"outflows":["extend done"]},{"enabledTest":"","timer":1,"updateFrequency":1,"x":-130,"y":694,"inflows":["not stopping","extend done"],"outflows":["not stopping","extend: grind connector"]},{"enabledTest":"","timer":1,"updateFrequency":1,"x":-430,"y":894,"inflows":["stopping","extend done"],"outflows":["done"]},{"enabledTest":"","timer":1,"updateFrequency":1,"x":-330,"y":794,"inflows":["not stopping","stopping"],"outflows":["stopping"]},{"enabledTest":"","timer":300,"updateFrequency":300,"x":70,"y":394,"inflows":["extend: reset position"],"outflows":["extend: grind connector"]},{"enabledTest":"","timer":1,"updateFrequency":1,"x":70,"y":194,"inflows":["extend: init"],"outflows":["extend: reset position"]},{"enabledTest":"(petriNet) => petriNet.block<IMyPistonBase>(\"Infinipiston Piston\").CurrentPosition > 9.99f","timer":1,"updateFrequency":1,"x":270,"y":794,"inflows":["extend: wait full extension"],"outflows":["extend: approach connector"]},{"enabledTest":"","timer":1,"updateFrequency":1,"x":-1030,"y":194,"inflows":["retract: init"],"outflows":["retract: grind segment"]},{"enabledTest":"(petriNet) => petriNet.block<IMyPistonBase>(\"Infinipiston Piston\").CurrentPosition < 0.01f","timer":120,"updateFrequency":120,"x":-1030,"y":394,"inflows":["retract: grind segment"],"outflows":["retract: weld connector"]},{"enabledTest":"(petriNet) =>  petriNet.block<IMyShipConnector>(\"Infinipiston Connector\").Status != MyShipConnectorStatus.Unconnected","timer":1,"updateFrequency":1,"x":-1030,"y":594,"inflows":["retract: weld connector"],"outflows":["retract: extend","retract: unmerge block"]},{"enabledTest":"(petriNet) => petriNet.block<IMyPistonBase>(\"Infinipiston Piston\").CurrentPosition > 5","timer":1,"updateFrequency":1,"x":-1230,"y":794,"inflows":["retract: unmerge block"],"outflows":["retract: merge block"]},{"enabledTest":"(petriNet) => petriNet.block<IMyShipMergeBlock>(\"Infinipiston Merge Block\").State == MergeState.Locked","timer":1,"updateFrequency":1,"x":-1030,"y":994,"inflows":["retract: merge block","retract: extend"],"outflows":["retract: done"]},{"enabledTest":"","timer":1,"updateFrequency":1,"x":-729,"y":599,"inflows":["not stopping","retract: done"],"outflows":["retract: grind segment","not stopping"]},{"enabledTest":"","timer":1,"updateFrequency":1,"x":-630,"y":894,"inflows":["stopping","retract: done"],"outflows":["done"]}]}